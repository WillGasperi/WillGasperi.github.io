<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8722541060502556"
     crossorigin="anonymous"></script>
    <meta name="google-adsense-account" content="ca-pub-8722541060502556">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orçamento Impressão 3D</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-900 text-slate-100 min-h-screen p-6">

<div class="max-w-4xl mx-auto space-y-8">

    <h1 class="text-3xl font-bold text-center">Orçamento de Impressão 3D</h1>

    <!-- TOGGLE -->
    <div class="flex justify-center gap-4">
        <button onclick="setModo('basico')" id="btnBasico"
            class="px-4 py-2 rounded bg-indigo-600">Modo Básico</button>
        <button onclick="setModo('avancado')" id="btnAvancado"
            class="px-4 py-2 rounded bg-slate-700">Modo Avançado</button>
    </div>

    <!-- ORÇAMENTO -->
    <div class="bg-slate-800 rounded-xl p-6 space-y-6">

        <div class="grid md:grid-cols-2 gap-4">
            <input id="tempo" type="number" step="0.1" placeholder="Tempo de impressão (h)"
                class="input">
            <input id="peso" type="number" placeholder="Peso da peça (g)"
                class="input">
        </div>

        <select id="impressora" class="input"></select>

        <input id="pintura" type="number" value="0"
            placeholder="Pintura (opcional R$)" class="input">

        <!-- AVANÇADO -->
        <div id="avancado" class="hidden space-y-4">
            <div class="grid md:grid-cols-3 gap-4">
                <input id="valorKg" type="number" value="50" class="input" placeholder="Filamento R$/kg">
                <input id="kwh" type="number" value="0.8" class="input" placeholder="Energia R$/kWh">
                <input id="maoObra" type="number" value="15" class="input" placeholder="Mão de obra R$/h">
            </div>
        </div>

        <input id="markup" type="number" value="2" step="0.1"
            class="input" placeholder="Markup (2 = 100%)">

        <button onclick="calcular()"
            class="w-full bg-indigo-600 hover:bg-indigo-700 py-3 rounded font-bold">
            Calcular Orçamento
        </button>

        <div id="resultado" class="hidden text-center bg-slate-700 p-4 rounded">
            <p class="text-slate-300">Preço final</p>
            <p id="preco" class="text-3xl font-bold text-green-400">R$ 0,00</p>
        </div>

    </div>

    <!-- IMPRESSORAS -->
    <div class="bg-slate-800 rounded-xl p-6 space-y-4">
        <h2 class="text-xl font-bold">Impressoras</h2>

        <div class="grid md:grid-cols-4 gap-3">
            <input id="nomeImp" placeholder="Nome" class="input">
            <input id="custoImp" type="number" placeholder="Custo R$" class="input">
            <input id="vidaImp" type="number" placeholder="Vida útil (h)" class="input">
            <input id="potenciaImp" type="number" placeholder="Potência (W)" class="input">
        </div>

        <button onclick="addImpressora()" class="bg-green-600 px-4 py-2 rounded">
            Adicionar Impressora
        </button>
    </div>

</div>

<style>
.input {
    width: 100%;
    padding: .6rem;
    border-radius: .4rem;
    background: #334155;
    border: 1px solid #475569;
}
</style>

<script>
let impressoras = JSON.parse(localStorage.getItem('impressoras')) || [];

function setModo(modo) {
    document.getElementById('avancado').classList.toggle('hidden', modo === 'basico');
    btnBasico.className = modo === 'basico' ? 'px-4 py-2 rounded bg-indigo-600' : 'px-4 py-2 rounded bg-slate-700';
    btnAvancado.className = modo === 'avancado' ? 'px-4 py-2 rounded bg-indigo-600' : 'px-4 py-2 rounded bg-slate-700';
}

function addImpressora() {
    const imp = {
        nome: nomeImp.value,
        custo: +custoImp.value,
        vida: +vidaImp.value,
        potencia: +potenciaImp.value
    };
    impressoras.push(imp);
    localStorage.setItem('impressoras', JSON.stringify(impressoras));
    carregarImpressoras();
}

function carregarImpressoras() {
    impressora.innerHTML = '<option value="">Selecione a impressora</option>';
    impressoras.forEach((i, idx) => {
        impressora.innerHTML += `<option value="${idx}">${i.nome}</option>`;
    });
}

function calcular() {
    const tempo = +tempo.value;
    const peso = +peso.value;
    const idx = impressora.value;
    if (tempo <= 0 || peso <= 0 || idx === "") {
        alert("Preencha tempo, peso e impressora.");
        return;
    }

    const imp = impressoras[idx];
    const custoHoraMaquina = imp.custo / imp.vida;
    const energia = (imp.potencia / 1000) * tempo * (+kwh.value || 0);
    const material = (peso / 1000) * (+valorKg.value || 0);
    const mao = tempo * (+maoObra.value || 0);
    const pinturaVal = +pintura.value || 0;

    const custo = material + energia + (custoHoraMaquina * tempo) + mao + pinturaVal;
    const precoFinal = custo * (+markup.value);

    preco.innerText = `R$ ${precoFinal.toFixed(2)}`;
    resultado.classList.remove('hidden');
}

carregarImpressoras();
setModo('basico');
</script>

</body>
</html>
